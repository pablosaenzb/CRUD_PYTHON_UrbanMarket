<!DOCTYPE html>
<html lang="es">
<head> 
        <meta charset="utf-8">
        <title>Urban Market - Minimercado online</title>
        <meta name="description" content="Supermercado de venta de insumos online con una amplia selección de alimentos frescos y productos de alta calidad. Realiza tus compras de manera conveniente desde la comodidad de tu hogar y recíbelas en tu puerta.¡Explora nuestro catálogo y disfruta de comprar en línea en nuestro minimercado de confianza!">
        <meta name="keywords" content="minimercado en línea, alimentos frescos, productos de alta calidad, compras en línea, entrega a domicilio, supermercado en línea, abastecimiento de alimentos, tienda de comestibles, alimentos saludables, conveniencia en línea">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="logos/favicon.ico">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" /> 
        <link rel="stylesheet" href="estilos/estilos-general.css">
        <link rel="stylesheet" href="estilos/estilos-productos.css">
        <link rel="stylesheet" href="estilos/estilos-header.css">
        <link rel="stylesheet" href="estilos/estilos-footer.css">
        
    </head>
<body> 

  <!--WHATSAPP -->
        <a href="https://api.whatsapp.com/send?phone=541168820881" class="btn-wsp" target="_blank"> <i class="fa fa-phone" aria-hidden="true"></i>
        </a>

<main class="contenedor_global">

    <header class="header">    
        <div class="header_superior"> 
            <div class="logo">
                <img src="logos/logo_color.svg" alt="Logo">
            </div>
            <div class="search">
                    <input type="search" name="search" placeholder="Buscar...">
            </div>
        </div>
         <div class="contenedor_menu">
            <div class="menu">
                <input type="checkbox" id="check_menu">
                <label id="label_check" for="check_menu">
                <i class="fa-solid fa-bars icon_menu"></i>
                </label>
                <nav>
                     <ul>
                         <li><a href="index.html" id="seleccion"><i class="fa-solid fa-house" style="color: #ffffff;"></i></a></li>
                         <li ><a href="ofertas.html">OFERTAS</a></li>
                         <li ><a href="nosotros.html">NOSOTROS</a></li>
                         <li><a href="productos.html">PRODUCTOS</a></li> 
                         <li><a href="contacto.html">CONTACTO    </a> </li>
                     </ul>
                </nav>
            </div>
        </div> 
    </header>
    <div class="contenedor_titulo" >
    <h2> Nuestros Productos </h2>
        <h3>    <label ></label></label>
        <input  type="radio"  name="opcionOferta" id="chkTodos" checked>Todos los articulos  
                
        <input  type="radio" class="botonRadioProductos"  name="opcionOferta"  id="chkCategoria">Por Categoria
    </h3> 
    </div>   
    <div class="contenedorCategorias" id="contenedorCategorias">
        <div class="contenedorCategoria" >
            <label for="cat1" id = "labelCategorias" hidden>Categorias</label>
            <select title="hola" id="cat1" class="selecto" name="categoria1" size="7" hidden></select>
        </div>
        <br>
        <div class="contenedorCategoria">
            <!--<label for="cat2">Categoria 2:</label>-->
            <br>
            <select title="" id="cat2" class="selecto" name="categoria2" size="7" hidden></select>
        </div>
        <br>
        <div class="contenedorCategoria">
            <label for="cat3"></label>
            <br>
            <select title="hola" id="cat3" class="selecto" name="categoria3" size="7" hidden></select>
        </div>
        <br>
        <div class="contenedorCategoria">
            <label for="cat4"></label>
            <br>
            <select title="hola" id="cat4" class="selecto" name="categoria4" size="7" hidden></select>
        </div>    
        
    </div>
    <div class="centro" ><button id="consulta" hidden>consulta</button></div>
   
    <div class="contenedor_productos">     
        
        <br>
        <br>
        <div id="productos" class="listas_productos">     
        </div>
    </div>




  
    <footer class="footer"> 
    <div class="contenedor_footer" >
        <div class="seccion_footer nosotros_footer"> 
            <img src="logos/logo_blanco.svg" alt="logo_footer" width="180px;" > 
            <p> En nuestro sitio web, encontrarás una selección cuidadosamente curada de insumos alimenticios, desde productos frescos y locales hasta especialidades exóticas de todo el mundo, proporcionando soluciones a medida para cada necesidad y presupuesto.
             </p>
            <ul class="redes_footer">
                <li><a href="#"> <i class="fa-brands fa-square-facebook"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-square-x-twitter"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-youtube"></i></a></li>
            </ul>    
        </div>
        <div class="seccion_footer reglamentos_footer">
            <h3> Reglamentos </h3>
            <ul>
                <li><a href="#">Terminos y condiciones</a></li>
                <li><a href="#">Politica de privacidad</a></li>
                <li><a href="#">Defensa del consumidor</a></li>
                <li><a href="#">Preguntas frecuentes</a></li>
            </ul>
        </div>
        <div class="seccion_footer menu_footer">
            <h3> Menu</h3>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="ofertas.html">Ofertas</a></li>
                <li><a href="nosotros.html">Nosotros</a></li>
                <li><a href="productos.html">Productos</a></li>
                <li><a href="contacto.html">Contactos</a></li>
            </ul>
        </div>  
        <div class="seccion_footer contacto_footer">
            <h3>Contacto</h3>
            <ul class="info_footer">
                <li>
                    <span><i class="fa-solid fa-location-dot"></i></span>
                    <P> 1142 Avenida Santa Fe <br>
                    Capital Federal CP 1205 </P>      
                </li>
                <li>
                <span><i class="fa-solid fa-phone"></i></span>
                 <p>Aten. al cliente: (+54) 011 4545-4545<br>
                    Reclamos: (+54) 011 4646-4646 </p> 
                </li>
                <li>
                <span><i class="fa-solid fa-envelope"></i></span>
                 <p>urbanmarket@gmail.com</p>   
                </li>
            </ul>
        </div>      
    </div> 
    <div class="copyright" >
        <p >©2023 - Todos los Derechos Reservados / Supermercado URBANMARKET</p>
    </div>
    </footer>

</main>




<script>    
/********************************************************************************************
 * AREA DE VARIABLES
********************************************************************************************/

var ubicacionFlask          = localStorage.getItem('ubicacionFlask');
var selectCat1              = document.getElementById('cat1');
var selectCat2              = document.getElementById('cat2');
var selectCat3              = document.getElementById('cat3');
var selectCat4              = document.getElementById('cat4');
var botonConsulta           = document.getElementById('consulta')
var seleccionConsultaxCat   = document.getElementById('chkCategoria'); 
var seleccionConsultaTodos  = document.getElementById('chkTodos'); 
var contenedorCategorias    = document.getElementById('contenedorCategorias'); 
var listaProductos          = document.getElementById('productos');
var labelCategorias         = document.getElementById("labelCategorias");
listaProductos.innerHTML    = '';

/*********************************************************************************************
 * AREA FUNCIONES
 *********************************************************************************************/
function ConsultaxCategorias()
{
    if (seleccionConsultaxCat.checked==true)
    {
    selectCat1.innerHTML ="";
    selectCat2.innerHTML ="";
    selectCat3.innerHTML ="";
    selectCat4.innerHTML ="";
    listaProductos.innerHTML    = '';
    contenedorCategorias.hidden = false; 
    selectCat1.hidden           = false;
    selectCat2.hidden           = false;
    selectCat3.hidden           = false;
    selectCat4.hidden           = false;
    botonConsulta.hidden        = false;
    labelCategorias.hidden      = false;
    obtieneCategoria1();
    }
}
function obtieneCategoria1() 
{
////////////////////////////////////////////////////////////////
// Armo browse 1
//////////////////////////////////////////////////////////////// 
fetch(ubicacionFlask + '/categorias/cat1')
.then(function (response){if (response.ok) {return response.json(); } })
.then(function (data)
{
    
    for (let categoria of data)
    {
            selectCat1.innerHTML = selectCat1.innerHTML + '<option value="' + categoria.id + '">'+ categoria.descripcion + '</option>';    
    }
    selectCat1.innerHTML +='</select>';
})

}
function seleccionCategoria1()
{
    ////////////////////////////////////////////////////////////////
// Seleccion Categoria 1. Armo browse categoria 2
////////////////////////////////////////////////////////////////
    var eleccionCat1 = selectCat1.value;          
    // Realizamos la solicitud GET al servidor
    fetch(ubicacionFlask + '/categorias/cat2/'+ eleccionCat1)
    .then(function (response){   if (response.ok) {return response.json(); }})
    .then(function (data)
    {
        let selectCat2 = document.getElementById('cat2');
        selectCat2.innerHTML = ""
        for (let categoria of data)
        {
            selectCat2.innerHTML = selectCat2.innerHTML + '<option value="' + categoria.id + '">'+ categoria.descripcion + '</option>'; 
        }
        selectCat2.innerHTML +='</select>';

    })
}
function seleccionCategoria2()
{
    ////////////////////////////////////////////////////////////////
// Seleccion Categoria 2 Armo browse categoria 3
////////////////////////////////////////////////////////////////
    // Realizamos la solicitud GET al servidor
    fetch(ubicacionFlask + '/categorias/cat3/'+ selectCat2.value)
    .then(function (response) {if (response.ok) {return response.json(); }})
    .then(function (data)
    {
        selectCat3.innerHTML = ""
        for (let categoria of data)
        {
            selectCat3.innerHTML = selectCat3.innerHTML + '<option value="' + categoria.id + '">'+ categoria.descripcion + '</option>'; 
        }
        selectCat3.innerHTML +='</select>';
    })      
}
function seleccionCategoria3()
{
    ////////////////////////////////////////////////////////////////
// Seleccion Categoria 3 Armo browse categoria 4
////////////////////////////////////////////////////////////////
    // Realizamos la solicitud GET al servidor
    fetch(ubicacionFlask + '/categorias/cat4/'+ selectCat3.value)
    .then(function (response) {if (response.ok) {return response.json(); }})
    .then(function (data)
    {
        let selectCat4 = document.getElementById('cat4');
        selectCat4.innerHTML = ""
        for (let categoria of data)
            {
                selectCat4.innerHTML = selectCat4.innerHTML + '<option value="' + categoria.id + '">'+ categoria.descripcion + '</option>'; 
            }
        selectCat4.innerHTML +='</select>';
    })      
};
function presionaBotonConsulta()
{   
    //////////////////////////////////////////////////
// consulto la base con la seleccion de categorias
//////////////////////////////////////////////////
    listaProductos.innerHTML = '';
    var formData = new FormData();
    formData.append('cat1', selectCat1.value);
    formData.append('cat2', selectCat2.value);
    formData.append('cat3', selectCat3.value);
    formData.append('cat4', selectCat4.value);
    // Aquí enviamos formData en lugar de JSON            
    fetch(ubicacionFlask + '/articulos/categorias', {method: 'POST',body: formData})
    .then(function (response) {if (response.ok) { return response.json(); }})
    .then(function (data) 
    {
        for (let producto of data) {
            if (producto.enoferta ==1 )
            {         
                listaProductos.innerHTML += '<div id = "producto" class="productos"><div class="contenedor_foto1"> <img src="static/imagenes/'+ producto.foto + '" ><img class="banner_oferta" src="static/imagenes/cartelOferta.png"></div> <h3 style="height:10vh;">' + producto.descripcion + '</h3><br> <div class="price"><strong>$' + producto.precio + '</strong> </div>  <div class="boton"> <a href="#" class="carrito">Agregar al carrito</a> </div> </div>';
            }
            else
            {         
                listaProductos.innerHTML += '<div id = "producto" class="productos"><div class="contenedor_foto1"> <img src="static/imagenes/'+ producto.foto + '" ></div> <h3 style="height:10vh;">' + producto.descripcion + '</h3><br> <div class="price"><strong>$' + producto.precio + '</strong> </div>  <div class="boton"> <a href="#" class="carrito">Agregar al carrito</a> </div> </div>';          
            }
        }
    })
    .catch(function (error)
    {
        // Código para manejar errores
        alert('Error al obtener los productos.');
    })
};
function consultaTodoElPadron()
{
    if (seleccionConsultaTodos.checked==true)
    {
    contenedorCategorias.hidden = true; 
    selectCat1.hidden           = true;
    selectCat2.hidden           = true;
    selectCat3.hidden           = true;
    selectCat4.hidden           = true;
    botonConsulta.hidden        = true;
    labelCategorias.hidden      = true;
    }    
    /*PRODUCTOS DEL CATALOGO*/
        // Realizamos la solicitud GET al servidor para obtener todos los productos
        /*PRODUCTOS */
        
        listaProductos.innerHTML = '';
                // Realizamos la solicitud GET al servidor para obtener todos los productos
        fetch(ubicacionFlask + '/articulos/clientes')
        .then(function (response) {
           if (response.ok) {return response.json(); }
        })
        .then(function (data) {
           // Iteramos sobre los productos y agregamos filas a la tabla
           for (let producto of data) {  
            if (producto.enoferta ==1 ){         
            listaProductos.innerHTML += '<div id = "producto" class="productos"><div class="contenedor_foto1"> <img src="static/imagenes/'+ producto.foto + '" ><img class="banner_oferta" src="static/imagenes/cartelOferta.png"></div> <h3 style="height:10vh;">' + producto.descripcion + '</h3> <div class="price"><strong>$' + producto.precio + '</strong> </div>  <div class="boton"> <a href="#" class="carrito">Agregar al carrito</a> </div> </div>';
            }
            else
            {         
            listaProductos.innerHTML += '<div id = "producto" class="productos"><div class="contenedor_foto1"> <img src="static/imagenes/'+ producto.foto + '" ></div> <h3 style="height:10vh;">' + producto.descripcion + '</h3> <div class="price"><strong>$' + producto.precio + '</strong> </div>  <div class="boton"> <a href="#" class="carrito">Agregar al carrito</a> </div> </div>';          
            }
           }
        })
           
        .catch(function (error) {
           // Código para manejar errores
           alert('Error al obtener los productos.');
       })
}


/*********************************************************************************************
 * AREA ESCUCHADORES
 *********************************************************************************************/
seleccionConsultaxCat.addEventListener('change',function(){ ConsultaxCategorias()});
selectCat1.addEventListener('change', function(){ seleccionCategoria1()});
selectCat2.addEventListener('change', function(){ seleccionCategoria2()});
selectCat3.addEventListener('change', function(){ seleccionCategoria3()});
botonConsulta.addEventListener('click', function(){presionaBotonConsulta()}); 
seleccionConsultaTodos.addEventListener('change', function(){consultaTodoElPadron()});

///////////////////////////////////////////////////////////////////////////////
///  AREA EJECUCION
//////////////////////////////////////////////////////////////////////////////

consultaTodoElPadron()

</script>


</body>   
</html> 

